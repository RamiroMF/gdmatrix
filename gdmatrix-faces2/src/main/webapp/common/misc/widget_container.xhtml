<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:sf="http://faces.santfeliu.org"
      xmlns:t="http://myfaces.apache.org/tomahawk">

  <ui:composition template="/templates/#{userSessionBean.template}/template.xhtml">
    <ui:param name="css" value="/common/misc/css/widget.css" />
    <ui:define name="body">

      <f:loadBundle basename="org.santfeliu.web.obj.resources.ObjectBundle" 
        var="objectBundle" />
      <f:loadBundle basename="org.santfeliu.misc.widget.web.resources.WidgetBundle"
        var="miscBundle" />  

      <sf:saveScroll value="#{widgetBean.scroll}" />    

      <t:div styleClass="portalLayer">

        <sf:widgetContainer
          id="header_container"
          binding="#{widgetBean.headerContainer}"
          columns="#{widgetBean.headerColumns}"
          columnClasses="#{widgetBean.headerColumnClasses}"
          columnTitles="#{widgetBean.headerColumnTitles}"
          columnRenderAsList="#{widgetBean.headerColumnRenderAsList}"
          layout="#{widgetBean.headerLayout}"
          dynamic="false"
          translator="#{userSessionBean.translator}"
          translationGroup="#{userSessionBean.translationGroup}"                
          styleClass="widget_container" />

        <sf:widgetContainer
          id="left_container"
          binding="#{widgetBean.leftContainer}"
          columns="#{widgetBean.leftColumns}"
          columnClasses="#{widgetBean.leftColumnClasses}"
          columnTitles="#{widgetBean.leftColumnTitles}"      
          columnRenderAsList="#{widgetBean.leftColumnRenderAsList}"
          layout="#{widgetBean.leftLayout}"
          dynamic="false"
          translator="#{userSessionBean.translator}"
          translationGroup="#{userSessionBean.translationGroup}"                      
          styleClass="widget_container" />

        <t:div styleClass="mainColumn">

          <sf:widgetContainer
            id="main_container"
            binding="#{widgetBean.mainContainer}"
            columns="#{widgetBean.mainColumns}"
            columnClasses="#{widgetBean.mainColumnClasses}"
            columnTitles="#{widgetBean.mainColumnTitles}"   
            columnRenderAsList="#{widgetBean.mainColumnRenderAsList}"
            layout="#{widgetBean.mainLayout}"
            dynamic="false"
            translator="#{userSessionBean.translator}"
            translationGroup="#{userSessionBean.translationGroup}"                        
            styleClass="widget_container" />

          <ui:include src="${requestScope['_customBar']}"/>        

          <sf:widgetContainer
            id="custom_container"
            binding="#{widgetBean.customContainer}"
            columns="#{widgetBean.customColumns}"
            columnClasses="#{widgetBean.customColumnClasses}"
            columnTitles="#{widgetBean.customColumnTitles}"  
            columnRenderAsList="#{widgetBean.customColumnRenderAsList}"        
            layout="#{widgetBean.customLayout}"
            styleClass="widget_container"
            dynamic="true"
            draggableWidgets="#{widgetBean.customDraggableWidgets}" 
            translator="#{userSessionBean.translator}"
            translationGroup="#{userSessionBean.translationGroup}"                        
            updateCallback="onUpdate" />  

          <sf:widgetContainer
            id="footer_container"
            binding="#{widgetBean.footerContainer}"
            columns="#{widgetBean.footerColumns}"
            columnClasses="#{widgetBean.footerColumnClasses}"
            columnTitles="#{widgetBean.footerColumnTitles}"    
            columnRenderAsList="#{widgetBean.footerColumnRenderAsList}"
            layout="#{widgetBean.footerLayout}"
            dynamic="false"
            translator="#{userSessionBean.translator}"
            translationGroup="#{userSessionBean.translationGroup}"                        
            styleClass="widget_container" />

        </t:div>

        <h:outputText value="#{widgetBean.scripts}" escape="false" />

        <h:commandButton id="refreshWidgetContainer" value="Refresh" action="#{widgetBean.show}" style="display:none;" />

      </t:div>
      
      
    </ui:define>
  </ui:composition>
</html>
